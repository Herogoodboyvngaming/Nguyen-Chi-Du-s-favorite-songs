<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>nh·ªØng b√†i h√°t y√™u th√≠ch nh·∫•t c·ªßa Nguy·ªÖn Ch√≠ D·ª± üáªüá≥‚ô•Ô∏èüáªüá≥</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            height:100vh; overflow:hidden; font-family:Arial,sans-serif; color:white; background:#000; position:relative;
            touch-action:manipulation;
        }
        h1 {
            position:absolute; top:8px; left:50%; transform:translateX(-50%); z-index:10; font-size:clamp(1.2rem,4vw,1.8rem);
            text-shadow:0 0 8px rgba(255,0,0,0.8); text-align:center; white-space:nowrap; animation:glow 4s infinite alternate;
            max-width:95%; overflow:hidden; text-overflow:ellipsis;
        }
        @keyframes glow { from {text-shadow:0 0 8px #ff0000;} to {text-shadow:0 0 16px #ff0000;} }
        #player-container { position:absolute; inset:0; z-index:1; }
        #player { width:100%; height:100%; object-fit:cover; }
        /* N√∫t ph√°t b√†i h√°t ·ªü gi·ªØa m√†n h√¨nh */
        #play-button-container {
            position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:10;
        }
        #play-button {
            background:rgba(76,175,80,0.92); color:white; border:none; padding:clamp(20px, 6vw, 30px) clamp(50px, 12vw, 80px);
            font-size:clamp(1.4rem,6vw,2.2rem); border-radius:clamp(60px, 15vw, 100px); cursor:pointer;
            box-shadow:0 0 clamp(20px, 6vw, 40px) rgba(76,175,80,0.8); transition:all 0.3s;
        }
        #play-button:hover, #play-button:active { transform:scale(1.1); box-shadow:0 0 clamp(30px, 8vw, 60px) rgba(76,175,80,1); }
        /* N√∫t STOP */
        #stop-button-container {
            position:absolute; bottom:clamp(60px, 12vh, 100px); right:clamp(16px, 4vw, 32px); z-index:10; display:none;
        }
        #stop-button {
            background:rgba(255,0,0,0.9); color:white; border:none; padding:clamp(14px, 4vw, 20px) clamp(28px, 8vw, 40px);
            font-size:clamp(1.2rem,5vw,1.8rem); border-radius:clamp(50px, 12vw, 80px); cursor:pointer;
            box-shadow:0 0 clamp(20px, 5vw, 30px) rgba(255,0,0,0.7); transition:all 0.3s;
        }
        #stop-button:hover, #stop-button:active { transform:scale(1.1); box-shadow:0 0 clamp(30px, 7vw, 50px) rgba(255,0,0,1); }
        /* Progress d∆∞·ªõi ch√¢n trang */
        #progress-container {
            position:absolute; bottom:clamp(60px, 10vh, 80px); left:50%; transform:translateX(-50%); z-index:10;
            width:90%; max-width:800px; display:none; align-items:center; gap:clamp(10px, 3vw, 20px); justify-content:center;
        }
        progress {
            flex:1; height:clamp(8px, 2vh, 12px); border-radius:clamp(4px, 1vw, 6px); background:#333; appearance:none;
        }
        progress::-webkit-progress-bar { background:#333; border-radius:clamp(4px, 1vw, 6px); }
        progress::-webkit-progress-value { background:rgba(76,175,80,0.9); border-radius:clamp(4px, 1vw, 6px); }
        #progress-percent {
            font-size:clamp(1.2rem,5vw,2rem); font-weight:bold;
        }
        /* ƒê·ªìng h·ªì VN */
        #clock {
            position:absolute; top:clamp(40px, 8vh, 60px); right:clamp(12px, 3vw, 20px); z-index:10; font-size:clamp(1rem,4vw,1.4rem);
            background:rgba(0,0,0,0.4); padding:clamp(6px, 1.5vw, 10px) clamp(10px, 3vw, 16px); border-radius:8px;
        }
        #status {
            position:absolute; bottom:clamp(16px, 3vh, 24px); left:50%; transform:translateX(-50%);
            font-size:clamp(0.9rem,3.5vw,1.1rem); color:#eee; text-align:center; z-index:10; padding:0 clamp(16px, 4vw, 32px); max-width:90%;
            background:rgba(0,0,0,0.4); border-radius:12px; padding:clamp(6px, 1.5vh, 10px) clamp(12px, 3vw, 20px); opacity:1; transition:opacity 1s ease;
        }
        #status.fade-out { opacity:0; }
        #song-modal {
            position:fixed; inset:0; background:rgba(0,0,0,0.9); display:none; justify-content:center; align-items:center; z-index:30; padding:clamp(10px, 3vw, 20px);
        }
        .modal-content {
            background:rgba(30,30,30,0.95); padding:clamp(16px, 5vw, 30px); border-radius:16px; max-height:90vh; overflow-y:auto;
            width:95%; max-width:500px; text-align:center;
        }
        .song-item {
            padding:clamp(14px, 4vh, 20px); margin:clamp(8px, 2vh, 12px) 0; background:rgba(76,175,80,0.4); border-radius:14px; cursor:pointer;
            transition:all 0.25s; font-size:clamp(1rem,4.5vw,1.2rem);
        }
        .song-item:hover { background:rgba(76,175,80,0.8); transform:scale(1.04); }
        .close-btn { margin-top:clamp(16px, 4vh, 24px); background:#ff5252; padding:clamp(12px, 3vh, 16px) clamp(32px, 8vw, 48px); font-size:clamp(1rem,4vw,1.2rem); }
        .update-note {
            margin: clamp(16px, 4vh, 24px) 0 clamp(8px, 2vh, 12px);
            font-size: clamp(0.9rem, 3.5vw, 1rem);
            color: #aaa;
            font-style: italic;
        }
        /* Popup x√°c nh·∫≠n STOP */
        #confirm-modal {
            position:fixed; inset:0; background:rgba(0,0,0,0.8); display:none; justify-content:center; align-items:center; z-index:40;
        }
        .confirm-content {
            background:rgba(50,50,50,0.95); padding:clamp(24px, 6vh, 40px); border-radius:16px; text-align:center; max-width:340px; width:90%;
        }
        .confirm-content h3 { margin-bottom:clamp(16px, 4vh, 24px); font-size:clamp(1.2rem,5vw,1.6rem); }
        .confirm-buttons {
            display:flex; justify-content:center; gap:clamp(16px, 4vw, 24px);
        }
        .confirm-btn {
            padding:clamp(10px, 3vh, 14px) clamp(24px, 6vw, 36px); border-radius:30px; cursor:pointer; font-size:clamp(1rem,4vw,1.2rem);
        }
        #confirm-ok { background:#ff4444; }
        #confirm-cancel { background:#666; }
        /* Hi·ªáu ·ª©ng drop c·ª±c hay */
        #effect-overlay { position:absolute; inset:0; pointer-events:none; z-index:15; display:none; }
        .flash-epic { animation:flashEpic 1.2s ease-out; }
        @keyframes flashEpic { 0% {opacity:0; background:rgba(255,80,80,0.7);} 25% {opacity:0.9; background:rgba(255,220,50,0.6);} 100% {opacity:0; background:transparent;} }
        #drop-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:clamp(3.5rem,14vw,8rem); font-weight:bold;
            color:#fff; text-shadow:0 0 60px #ffff00,0 0 120px #ff00ff; opacity:0; z-index:20; pointer-events:none; white-space:nowrap; text-align:center; }
        .drop-epic { animation:dropEpic 5s ease-out forwards; }
        @keyframes dropEpic { 0% {opacity:0; transform:translate(-50%,-50%) scale(0.3) rotate(-10deg);} 10% {opacity:1; transform:translate(-50%,-50%) scale(1.6) rotate(10deg);}
            35% {transform:translate(-50%,-50%) scale(1.1) rotate(-5deg);} 65% {transform:translate(-50%,-50%) scale(1.05) rotate(0deg);}
            100% {opacity:0; transform:translate(-50%,-50%) scale(2) rotate(15deg);} }
        #shake-screen { animation:shake 0.6s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%,90% {transform:translate3d(-4px,0,0);} 20%,80% {transform:translate3d(8px,0,0);} 30%,50%,70% {transform:translate3d(-12px,0,0);}
            40%,60% {transform:translate3d(12px,0,0);} }
        #particles { position:absolute; inset:0; pointer-events:none; z-index:18; overflow:hidden; }
        .particle { position:absolute; width:clamp(10px, 3vw, 16px); height:clamp(10px, 3vw, 16px); background:#ffff00; border-radius:50%; box-shadow:0 0 clamp(20px, 5vw, 40px) #ffff00,0 0 clamp(40px, 10vw, 80px) #ff00ff; opacity:0; pointer-events:none; }
    </style>
</head>
<body>
    <h1>nh·ªØng b√†i h√°t y√™u th√≠ch nh·∫•t c·ªßa Nguy·ªÖn Ch√≠ D·ª± üáªüá≥‚ô•Ô∏èüáªüá≥</h1>

    <div id="player-container"><div id="player"></div></div>
    <div id="effect-overlay"></div>
    <div id="drop-text"></div>
    <div id="particles"></div>

    <div id="clock">ƒê·ªìng h·ªì VN: </div>

    <!-- N√∫t ph√°t b√†i h√°t ·ªü gi·ªØa m√†n h√¨nh -->
    <div id="play-button-container">
        <button id="play-button">Ph√°t b√†i h√°t</button>
    </div>

    <!-- N√∫t STOP -->
    <div id="stop-button-container">
        <button id="stop-button">üõë STOP</button>
    </div>

    <div id="progress-container">
        <progress id="progress-bar" value="0" max="100"></progress>
        <span id="progress-percent">0%</span>
    </div>

    <div id="status">B·∫•m n√∫t gi·ªØa m√†n h√¨nh ƒë·ªÉ ch·ªçn v√† ph√°t b√†i h√°t</div>

    <!-- Modal danh s√°ch y√™u th√≠ch -->
    <div id="song-modal">
        <div class="modal-content">
            <h2 id="list-title">Danh s√°ch b√†i y√™u th√≠ch</h2>
            <div class="song-item" data-id="ZPuDZJk4Kpk">Em n√†o c√≥ t·ªôi remix</div>
            <div class="song-item" data-id="bqOPZRiDUTM">M·ªü l·ªëi cho em - ph·∫ßn 1</div>
            <div class="song-item" data-id="oW3ZnOOuTA4">M·ªü l·ªëi cho em - ph·∫ßn 2</div>
            <div class="song-item" data-id="acNgISMAMzk">M·ªü l·ªëi cho em - ph·∫ßn 3</div>
            <div class="song-item" data-id="pkDWg38-KB4">Super hero</div>
            <div class="song-item" data-id="igvsyOvrnOY">M√¢y ƒë√™m ch·ªù m·∫•y ƒë√™m - Nguy·ªÖn H·ªØu Kha</div>
            <div class="song-item" data-id="Xk8aDlC2nIM">N·∫Øng d∆∞·ªõi ch√¢n m√¢y remix - HuyPT & Nguy·ªÖn H·ªØu Kha</div>
            <div class="song-item" data-id="abPmZCZZrFA">ƒê·ª´ng l√†m tr√°i tim anh ƒëau - S∆°n T√πng M-TP</div>
            <div class="song-item" data-id="30KI5SuECuc">√Çm th·∫ßm b√™n em - S∆°n T√πng M-TP</div>
            <div class="song-item" data-id="d5Co9mMkTUw">H·∫πn h√≤ nh∆∞ng kh√¥ng y√™u remix</div>
            <div class="song-item" data-id="xUgHL-6_QS4">M·∫°nh b√† - Linh H∆∞∆°ng Luz</div>
            <div class="song-item" data-id="T6_NLQjxvVo">C√≥ m√¨nh v√† ta remix</div>
            <div class="song-item" data-id="HVBnpC1b_5Y">Cry for me - Michita ft. Ami</div>
            <div class="song-item" data-id="Jnv2dSiM3Sk">∆Øng th√¨ n√≥i remix - QZ REMIX</div>
            <div class="song-item" data-id="JJL3lOa-JjE">C∆Ø·ªöI CH√çNH REMIX (c·ª±c bass)</div>
            <div class="update-note">"B√†i h√°t m·ªõi s·∫Ω c·∫≠p nh·∫≠t ·ªü ƒë√¢y n·∫øu c√≥"</div>
            <button class="close-btn" id="close-song-modal">ƒê√≥ng</button>
        </div>
    </div>

    <!-- Popup x√°c nh·∫≠n STOP -->
    <div id="confirm-modal">
        <div class="confirm-content">
            <h3>B·∫°n c√≥ ch·∫Øc mu·ªën d·ª´ng nh·∫°c kh√¥ng?</h3>
            <div class="confirm-buttons">
                <button class="confirm-btn" id="confirm-ok">OK</button>
                <button class="confirm-btn" id="confirm-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        var player;
        var progressTimer;

        // ƒê·ªìng h·ªì real-time VN
        function updateClock() {
            const now = new Date();
            const options = { timeZone: 'Asia/Ho_Chi_Minh', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('clock').textContent = `ƒê·ªìng h·ªì VN: ${now.toLocaleTimeString('vi-VN', options)}`;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // N√∫t ph√°t ·ªü gi·ªØa b·∫•m m·ªü popup
        document.getElementById('play-button').addEventListener('click', () => {
            const songCount = document.querySelectorAll('.song-item').length;
            document.getElementById('list-title').textContent = `Danh s√°ch b√†i y√™u th√≠ch (${songCount} b√†i)`;
            document.getElementById('song-modal').style.display = 'flex';
        });

        document.getElementById('close-song-modal').addEventListener('click', () => {
            document.getElementById('song-modal').style.display = 'none';
        });

        document.querySelectorAll('.song-item').forEach(item => {
            item.addEventListener('click', () => {
                playSong(item.dataset.id, item.textContent);
                document.getElementById('song-modal').style.display = 'none';
                document.getElementById('play-button-container').style.display = 'none';
                document.getElementById('stop-button-container').style.display = 'block';
            });
        });

        // N√∫t STOP v·ªõi x√°c nh·∫≠n
        document.getElementById('stop-button').addEventListener('click', () => {
            document.getElementById('confirm-modal').style.display = 'flex';
        });

        document.getElementById('confirm-cancel').addEventListener('click', () => {
            document.getElementById('confirm-modal').style.display = 'none';
        });

        document.getElementById('confirm-ok').addEventListener('click', () => {
            document.getElementById('confirm-modal').style.display = 'none';
            if (player) {
                player.stopVideo();
                player.destroy();
                player = null;
            }
            if (progressTimer) clearInterval(progressTimer);
            document.getElementById('progress-container').style.display = 'none';
            document.getElementById('progress-bar').value = 0;
            document.getElementById('progress-percent').textContent = '0%';
            document.getElementById('status').textContent = "Nh·∫°c ƒë√£ d·ª´ng. B·∫•m n√∫t gi·ªØa m√†n h√¨nh ƒë·ªÉ ph√°t l·∫°i";
            document.getElementById('stop-button-container').style.display = 'none';
            document.getElementById('play-button-container').style.display = 'block';
        });

        function playSong(videoId, songName) {
            if (player) player.destroy();
            if (progressTimer) clearInterval(progressTimer);

            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'modestbranding': 1,
                    'rel': 0,
                    'showinfo': 0,
                    'fs': 0,
                    'iv_load_policy': 3
                },
                events: {
                    'onReady': (event) => {
                        event.target.playVideo();
                        showTemporaryStatus(`ƒêang ph√°t: ${songName}`);
                        document.getElementById('progress-container').style.display = 'flex';
                        startDropTimer();
                        startProgressUpdate();
                    },
                    'onStateChange': (event) => {
                        if (event.data === YT.PlayerState.ENDED) {
                            const songCount = document.querySelectorAll('.song-item').length;
                            document.getElementById('list-title').textContent = `Danh s√°ch b√†i y√™u th√≠ch (${songCount} b√†i)`;
                            document.getElementById('song-modal').style.display = 'flex';
                            document.getElementById('progress-container').style.display = 'none';
                            document.getElementById('progress-bar').value = 0;
                            document.getElementById('progress-percent').textContent = '0%';
                            document.getElementById('stop-button-container').style.display = 'none';
                            document.getElementById('play-button-container').style.display = 'block';
                        }
                    }
                }
            });
        }

        function showTemporaryStatus(text) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = text;
            statusEl.classList.remove('fade-out');
            setTimeout(() => {
                statusEl.classList.add('fade-out');
            }, 15000);
        }

        function startProgressUpdate() {
            const progressBar = document.getElementById('progress-bar');
            const progressPercent = document.getElementById('progress-percent');

            progressTimer = setInterval(() => {
                if (player && player.getPlayerState() === YT.PlayerState.PLAYING) {
                    const duration = player.getDuration();
                    const currentTime = player.getCurrentTime();
                    if (duration > 0) {
                        const percent = (currentTime / duration) * 100;
                        progressBar.value = percent;
                        progressPercent.textContent = `${Math.round(percent)}%`;
                    }
                }
            }, 1000);
        }

        function startDropTimer() {
            function triggerDrop() {
                const isEpic = Math.random() < 0.4;
                showEpicEffect(isEpic);
                const delay = isEpic ? Math.random()*45000 + 35000 : Math.random()*35000 + 15000;
                setTimeout(triggerDrop, delay);
            }
            triggerDrop();
        }

        function showEpicEffect(isEpic) {
            document.getElementById('effect-overlay').className = 'flash-epic';
            document.getElementById('effect-overlay').style.display = 'block';
            setTimeout(() => document.getElementById('effect-overlay').style.display = 'none', isEpic ? 1800 : 1000);

            document.getElementById('drop-text').textContent = isEpic ? "SI√äUUUUUU ü§Øü§©" : "DROP!";
            document.getElementById('drop-text').className = isEpic ? 'drop-epic' : 'drop-normal';

            if (isEpic) {
                document.body.classList.add('shake-screen');
                setTimeout(() => document.body.classList.remove('shake-screen'), 500);
            }

            const count = isEpic ? 80 : 35;
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = '50%';
                p.style.top = '50%';
                p.style.background = isEpic ? ['#ffff00','#ff00ff','#00ffff','#ff4500'][Math.floor(Math.random()*4)] : '#ffff00';
                document.getElementById('particles').appendChild(p);

                const angle = Math.random() * 360;
                const dist = isEpic ? 700 + Math.random()*500 : 400 + Math.random()*300;
                const dx = Math.cos(angle * Math.PI / 180) * dist;
                const dy = Math.sin(angle * Math.PI / 180) * dist;

                p.animate([
                    { transform: 'translate(-50%, -50%) scale(0.2)', opacity: 1 },
                    { transform: `translate(${dx}px, ${dy}px) scale(0)`, opacity: 0 }
                ], {
                    duration: isEpic ? 2200 + Math.random()*1800 : 1600 + Math.random()*1200,
                    easing: 'ease-out'
                });

                setTimeout(() => p.remove(), 5000);
            }
        }

        // Ban ƒë·∫ßu status
        document.getElementById('status').textContent = "B·∫•m n√∫t gi·ªØa m√†n h√¨nh ƒë·ªÉ ch·ªçn v√† ph√°t b√†i h√°t";
    </script>
</body>
</html>
